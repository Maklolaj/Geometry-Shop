<p>user-profile works!</p>

<div *ngIf="formState$ | async as formState">
  <form [ngrxFormState]="formState" (submit)="submit()">
    <!-- Name -->
    <div>
      <mat-form-field>
        <input
          matInput
          placeholder="User Name"
          [ngrxFormControlState]="formState.controls.name"
        />
        <mat-error *ngIf="formState.errors['_name']?.required">
          A user name is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Surname -->
    <div>
      <mat-form-field>
        <input
          matInput
          placeholder="User Surname"
          [ngrxFormControlState]="formState.controls.surname"
        />
        <mat-error *ngIf="formState.errors['_surname']?.required">
          A surname is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Terms Of Use -->
    <div>
      <mat-checkbox
        [ngrxFormControlState]="formState.controls.agreeToTermsOfUse"
        >Agree to terms of use
      </mat-checkbox>
      <mat-error
        *ngIf="
          formState.errors['_agreeToTermsOfUse']?.required &&
          (formState.controls.agreeToTermsOfUse.isTouched ||
            formState.controls.agreeToTermsOfUse.isSubmitted)
        "
        class="user-profile_frorm__terms-of-use-error"
      >
        You must agree to the terms of use
      </mat-error>
    </div>

    <!-- Street -->
    <div>
      <mat-form-field>
        <input
          matInput
          placeholder="Sreet"
          [ngrxFormControlState]="formState.controls.street"
        />
      </mat-form-field>
    </div>

    <!-- City -->
    <div>
      <mat-form-field>
        <input
          matInput
          placeholder="Sreet"
          [ngrxFormControlState]="formState.controls.city"
        />
      </mat-form-field>
    </div>

    <!-- PostalCode -->
    <div>
      <mat-form-field>
        <input
          matInput
          placeholder="Sreet"
          [ngrxFormControlState]="formState.controls.postalCode"
        />
      </mat-form-field>
    </div>

    <!-- Date of birth -->
    <div>
      <mat-form-field>
        <input
          matInput
          [matDatepicker]="picker"
          placeholder="Date of Birth"
          [ngrxFormControlState]="formState.controls.dateOfBirth"
          [ngrxValueConverter]="dateValueConverter"
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </div>

    <div>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="formState.isInvalid && formState.isSubmitted"
      >
        Submit
      </button>
      <button
        mat-raised-button
        type="button"
        [disabled]="
          formState.isPristine &&
          formState.isUntouched &&
          formState.isUnsubmitted
        "
        (click)="reset()"
      >
        Reset
      </button>
    </div>
  </form>
</div>
